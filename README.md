# ü©∏ Trombocity - Donor Appointment Monitor

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏ –Ω–∞ –¥–æ–Ω–∞—Ü–∏—é —Ç—Ä–æ–º–±–æ—Ü–∏—Ç–æ–≤ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º –¥–æ–Ω–æ—Ä—Å–∫–æ–º —Ü–µ–Ω—Ç—Ä–µ.

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Node.js —Å–µ—Ä–≤–µ—Ä –Ω–∞ Render** (Puppeteer):
   - –ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ https://donor-mos.online/account/
   - –ü–∞—Ä—Å–∏—Ç —Ç–∞–±–ª–∏—Ü—É –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç
   - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
   - –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –¥–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 3 —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram —Å ‚ÄºÔ∏è

2. **Google Apps Script** (—Ç–∞–π–º–µ—Ä):
   - –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç GET-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/check`
   - –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫–æ–Ω—Å–æ–ª—å GAS

3. **Self-ping heartbeat**:
   - –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç —Å–µ—Ä–≤–µ—Ä –ø–∏–Ω–≥—É–µ—Ç —Å–∞–º —Å–µ–±—è
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞—Å—ã–ø–∞–Ω–∏–µ –Ω–∞ Render Free Tier

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Render

### 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service

- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- **Build Command:** `npm install`
- **Start Command:** `npm start`
- **Environment:** Node

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è)

–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –≤ –∫–æ–¥–µ. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤—ã–Ω–µ—Å—Ç–∏ –≤ env-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```
PORT=3000
```

### 3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Render –≤—ã–¥–∞—Å—Ç URL —Ç–∏–ø–∞:
```
https://trombocity-monitor.onrender.com
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Apps Script

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ Google Apps Script

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://script.google.com/

### 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

- "–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç" ‚Üí –ù–∞–∑–æ–≤–∏—Ç–µ "Trombocity Monitor"
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `google-apps-script.js`

### 3. –ó–∞–º–µ–Ω–∏—Ç–µ URL

```javascript
const RENDER_URL = 'https://YOUR-APP-NAME.onrender.com'; // ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `testConnection` –∏ –Ω–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å".
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (Ctrl+Enter) ‚Äî –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω`.

### 5. –°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä

–í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `setupMinuteTrigger` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ.
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –º–µ–Ω—é **"–¢—Ä–∏–≥–≥–µ—Ä—ã"** (—Å–ª–µ–≤–∞) ‚Äî –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ç—Ä–∏–≥–≥–µ—Ä "checkDonorDates" —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 1 –º–∏–Ω—É—Ç–∞.

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ Render

–í –¥–∞—à–±–æ—Ä–¥–µ Render ‚Üí –≤–∫–ª–∞–¥–∫–∞ "Logs":

```
[CHECK] –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
[AUTH] –í–≤–æ–¥ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è...
[AUTH] –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...
[PARSE] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã...
[RESULT] –ù–∞–π–¥–µ–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç: 2 - 09/10/2025, 10/10/2025
[CHECK] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ 4523ms
```

### –õ–æ–≥–∏ Google Apps Script

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Üí –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Üí –õ–æ–≥–∏:

```
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞. –î–∞—Ç: 2
```

### Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –¥–∞—Ç—ã –ø—Ä–∏–¥—É—Ç 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è:

```
‚ÄºÔ∏è –ù–û–í–ê–Ø –î–ê–¢–ê –î–õ–Ø –î–û–ù–ê–¶–ò–ò ‚ÄºÔ∏è

üìÖ 11/10/2025

üîó https://donor-mos.online/account/
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Render –∑–∞—Å—ã–ø–∞–µ—Ç

- Self-ping –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `[HEARTBEAT] Self-ping —É—Å–ø–µ—à–µ–Ω`

### Google Apps Script –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—ã: https://script.google.com/home/usages
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç: 90 –º–∏–Ω—É—Ç/–¥–µ–Ω—å
- 1 –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚âà 3 —Å–µ–∫—É–Ω–¥—ã ‚Üí –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å ~1800 –ø—Ä–æ–≤–µ—Ä–æ–∫/–¥–µ–Ω—å

### Puppeteer –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ø–∞–º—è—Ç–∏

- Render Free Tier: 512MB RAM
- Puppeteer –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å —Ñ–ª–∞–≥–∞–º–∏ `--single-process` –∏ `--disable-dev-shm-usage`
- –û—Ç–∫–ª—é—á–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/CSS –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏

## üìà –†–∞—Å—Ö–æ–¥ —Ä–µ—Å—É—Ä—Å–æ–≤

### Render (750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü –ª–∏–º–∏—Ç)

- Self-ping –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç = —Å–µ—Ä–≤–µ—Ä –≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–µ–Ω
- –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ: **744 —á–∞—Å–∞/–º–µ—Å—è—Ü** (24/7) ‚úÖ –£–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è

### Google Apps Script

- 1 –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É = 60 –ø—Ä–æ–≤–µ—Ä–æ–∫/—á–∞—Å
- 60 –ø—Ä–æ–≤–µ—Ä–æ–∫ √ó 24 —á–∞—Å–∞ = 1440 –ø—Ä–æ–≤–µ—Ä–æ–∫/–¥–µ–Ω—å
- 1440 √ó 3 —Å–µ–∫ = 4320 —Å–µ–∫ = **72 –º–∏–Ω—É—Ç—ã/–¥–µ–Ω—å** ‚úÖ –£–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ 90 –º–∏–Ω—É—Ç

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã GAS

–í Google Apps Script –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```javascript
removeAllTriggers()
```

### –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Render

–í –¥–∞—à–±–æ—Ä–¥–µ Render ‚Üí Settings ‚Üí "Suspend Service"

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
